{
  "hash": "fbe3cbedf15ce5be21040b0509f00ba9",
  "result": {
    "markdown": "---\ntitle: \"Entendendo, calculando e visualizando a razão de mortalidade materna do Brasil com o R\"\ndescription: \"Explorando a evolução desse indicador dentro do país por meio do R\"\nauthor:\n  - name: \"Rafael Sant'Ana Herzog\"\n    url: https://rafaherzog.github.io/rafasantanah/\n    affiliation: Estudante de graduação em Estatística na UFES\ndate: 2022-01-25\ncategories: [estatística, R, saúde] # self-defined categories\ncitation: \n  url: https://rafaherzog.github.io/rafasantanah//posts/25-01-2022-rmm/ \nimage: capa.png\ndraft: false # setting this to `true` will prevent your post from appearing on your listing page until you're ready!\n---\n\n\n\n\n# Introdução\n\nNeste post, iremos discutir sobre o conceito de razão de mortalidade materna, utilizando o R para a realização de seu cálculo e para a visualização de sua evolução ao longo do tempo no Brasil. Em primeiro lugar, chama-se de razão de mortalidade materna (RMM) o indicador utilizado para conhecer o nível de morte materna, calculado pela razão entre o número de óbitos maternos e o número de nascidos vivos durante um período de tempo e em um determinado espaço geográfico, multiplicada por 100.000 (padrão internacional). Além disso, é considerado como \"óbito materno\" a \"morte de uma mulher durante a gestação, parto ou dentro de um período de 42 dias após o término da gestação (o puerpério) (...), devida a qualquer causa relacionada com ou agravada pela gravidez ou por medidas em relação a ela, porém não devida às causas acidentais ou incidentais\" [(OMS, 1997)](https://bvsms.saude.gov.br/bvs/publicacoes/qualificacao_saude_sup/pdf/Atenc_saude3fase.pdf#). Matematicamente, temos que a razão de mortalidade materna é dada por:\n\n$$\\frac{\\text{Nº de óbitos maternos em um dado período de tempo e espaço geográfico}}{\\text{Nº de nascidos vivos sob essas mesmas condições}} \\times 100.000$$\n\nO resultado do cálculo acima deve ser interpretado como sendo o número de óbitos maternos em um dado período de tempo e em um certo espaço geográfico a cada 100.000 nascidos vivos nessas mesmas condições. Apesar de, em teoria, ser mais correta a utilização do número total de gestações para o denominador dessa razão, a impossibilidade de obtenção desse dado faz com que utilizemos em seu lugar o número total de nascidos vivos, tornando o resultado encontrado para a taxa uma aproximação do seu verdadeiro valor. É também importante destacar que, diferentemente do Ministério da Saúde, que realiza correções no cálculo da razão de mortalidade materna para levar em consideração a subenumeração de mortes maternas e de nascidos vivos, trabalharemos nesse post com a razão de mortalidade materna em seu estado natural, sem maiores modificações.\n\nCom esses conceitos iniciais em mente, passemos, agora, para o cálculo dessa razão no R, bem como para diferentes formas de como podemos visualizar sua evolução no país ao longo dos anos.\n\n# Carregando os pacotes necessários e importando a base de dados\n\nPara a realização do cálculo da razão de mortalidade materna no R, precisamos, primeiramente, carregar o pacote <tt>tidyverse</tt>, formado por uma coleção de outros pacotes que nos serão úteis, em especial o <tt>dplyr</tt>, o <tt>readr</tt> e o <tt>ggplot2</tt>. Carregaremos, também, os pacotes <tt>sf</tt> e <tt>DT</tt>, que serão utilizados, respectivamente, para a leitura de um arquivo do tipo <tt>shapefile</tt> e para a construção de uma tabela, ambos no último exemplo do texto.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# Carregando os pacotes necessários\nlibrary(tidyverse)\nlibrary(sf)\nlibrary(DT)\n```\n:::\n\n\nPara importar a base de dados com a qual trabalharemos ao longo do post, será utilizada a função <tt>read_delim</tt>, do pacote <tt>readr</tt>, que receberá dois argumentos: o primeiro, <tt>file</tt>, recebe o nome do arquivo <tt>.csv</tt> que contém nossa base de dados; já o segundo argumento, <tt>delim</tt>, recebe o delimitador utilizado no arquivo para separar suas colunas, que nesse caso é o ponto e vírgula. A base de dados será salva no objeto nomeado por <tt>dados_maternos</tt>. Caso queira, você também pode realizar o download do arquivo através [deste link.](https://drive.google.com/file/d/18ABAfA0yNSiCP-yla4zwu2KHTnicC5RS/view?usp=sharing)\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndados_maternos <- read_delim(file = \"dados_maternos.csv\", delim = \";\")\n```\n:::\n\n\nA tibble <tt>dados_maternos</tt> é formada por seis colunas, que contêm, respectivamente, o código do estado, sua sigla, a região à qual o estado pertence, o ano ao qual a linha se refere (indo de 2005 a 2019, uma vez que os dados de 2020 e 2021 ainda são preliminares), o número de nascidos vivos no estado no dado ano e o número de óbitos maternos no mesmo. As linhas da tibble estão ordenadas de acordo com o código das unidades federativas. Os dados referentes aos nascidos vivos são provenientes do SINASC (Sistema de Informações sobre Nascidos Vivos) e foram obtidos através do [Painel de Monitoramento de Nascidos Vivos](http://svs.aids.gov.br/dantps/centrais-de-conteudos/paineis-de-monitoramento/natalidade/nascidos-vivos/) do Ministério da Saúde, enquanto as informações sobre os óbitos maternos são provenientes do SIM (Sistema de Informações sobre Mortalidade) e foram obtidas por meio do [Painel de Monitoramento da Mortalidade Materna](http://svs.aids.gov.br/dantps/centrais-de-conteudos/paineis-de-monitoramento/mortalidade/materna/) do mesmo órgão. Observe abaixo as dez primeiras linhas da tibble.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndados_maternos\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 405 × 6\n   codigo_uf uf    regiao   ano nascimentos obitos\n       <dbl> <chr> <chr>  <dbl>       <dbl>  <dbl>\n 1        11 RO    Norte   2005       28081     15\n 2        11 RO    Norte   2006       24925     15\n 3        11 RO    Norte   2007       22996     10\n 4        11 RO    Norte   2008       26791     12\n 5        11 RO    Norte   2009       26083     17\n 6        11 RO    Norte   2010       25835     16\n 7        11 RO    Norte   2011       27658     15\n 8        11 RO    Norte   2012       26513     17\n 9        11 RO    Norte   2013       27097     18\n10        11 RO    Norte   2014       27560     22\n# ℹ 395 more rows\n```\n:::\n:::\n\n\n# Calculando a razão de mortalidade materna e a adicionando à base de dados\n\nCaso nosso interesse seja apenas adicionar uma coluna contendo a razão de mortalidade materna para cada estado e ano à nossa base de dados, precisamos apenas executar um comando. Utilizando a função <tt>mutate</tt>, do pacote <tt>dplyr</tt>, adicionaremos uma nova coluna à tibble <tt>dados_maternos</tt>, a qual nomearemos por \"mortalidade\". Essa nova coluna será formada por um vetor de números no qual cada posição representa o valor do cálculo discutido na seção anterior para cada uma das linhas de <tt>dados_maternos</tt>, arredondados para duas casas decimais por meio da função <tt>round</tt>, do pacote básico <tt>base</tt>. Por padrão, a função <tt>mutate</tt> irá manter todas as colunas originais da tibble utlizada, adicionando a nova coluna em seu lado direito.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# Calculando a razão de mortalidade materna e a adicionando à base de dados\ndados_maternos <- dados_maternos |> \n  mutate(\"mortalidade\" = round((dados_maternos$obitos/dados_maternos$nascimentos) * 100000, digits = 2))\n```\n:::\n\n\nAs primeiras linhas do objeto resultante desse processo podem ser vistas a seguir:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndados_maternos\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 405 × 7\n   codigo_uf uf    regiao   ano nascimentos obitos mortalidade\n       <dbl> <chr> <chr>  <dbl>       <dbl>  <dbl>       <dbl>\n 1        11 RO    Norte   2005       28081     15        53.4\n 2        11 RO    Norte   2006       24925     15        60.2\n 3        11 RO    Norte   2007       22996     10        43.5\n 4        11 RO    Norte   2008       26791     12        44.8\n 5        11 RO    Norte   2009       26083     17        65.2\n 6        11 RO    Norte   2010       25835     16        61.9\n 7        11 RO    Norte   2011       27658     15        54.2\n 8        11 RO    Norte   2012       26513     17        64.1\n 9        11 RO    Norte   2013       27097     18        66.4\n10        11 RO    Norte   2014       27560     22        79.8\n# ℹ 395 more rows\n```\n:::\n:::\n\n\n# Analisando a evolução da razão de mortalidade materna nacional através de um gráfico de linhas\n\nAgora que já sabemos como calcular a razão de mortalidade materna e como adicioná-la à nossa base de dados, podemos passar para algumas análises e manipulações mais interessantes. O primeiro exemplo tratará de uma visão nacional do indicador. Para realizar uma análise de sua evolução ao longo dos anos, utilizaremos um gráfico de linhas, tipo de gráfico muito útil quando o objetivo é observar o comportamento de séries temporais. Primeiramente, precisamos agrupar nossa base de dados por ano, uma vez que queremos analisar todos os estados de forma conjunta. Para isso, será utilizada a função <tt>group_by</tt>, do pacote <tt>dplyr</tt>, na qual o primeiro argumento é o <tt>data.frame</tt>, ou tibble, no(a) qual a operação será realizada, e o segundo argumento é o nome da variável pela qual queremos que os dados sejam agrupados. Caso tivéssemos interesse em agrupá-los por mais de uma variável, bastaria adicionar os nomes das outras variáveis após \"ano\", separados por vírgula.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# Agrupando os dados por ano e os resumindo\ndados_maternos_nacional <- group_by(dados_maternos, ano) |>\n  summarise(nascimentos_br = sum(nascimentos),\n            obitos_br = sum(obitos),\n            mortalidade_br = round((obitos_br/nascimentos_br) * 100000, 2)) \n```\n:::\n\n\nFeito o agrupamento, utilizamos a função <tt>summarise</tt>, também do pacote <tt>dplyr</tt>, para realizar a criação de uma nova tibble, que será como um resumo de <tt>dados_maternos</tt>. O número de linhas dessa tibble será igual ao número de combinações possíveis das variáveis agrupadas no passo anterior; como agrupamos apenas por ano, a nova tibble terá 15 linhas, uma para cada ano diferente presente na base de dados utilizada. Os argumentos de <tt>summarise</tt> serão pares de nomes e funções, nos quais os primeiros serão os nomes das colunas que irão compor a nova tibble, e as segundas são as funções que serão aplicadas na variável indicada da tibble original. Assim, criaremos três novas colunas: <tt>nascimentos_br</tt>, que receberá a soma de todos os nascidos vivos no dado ano; <tt>obitos_br</tt>, que receberá a soma de todos os óbitos maternos no dado ano; e <tt>mortalidade_br</tt>, que receberá a razão de mortalidade materna do período.\n\nNote que não tivemos que dizer qual o <tt>data.frame</tt> (ou tibble) que seria utilizado nessa função, visto que estamos utilizando o operador <tt>pipe (\\|\\>)</tt> para encadear as funções <tt>group_by</tt> e <tt>summarise</tt>. O resultado desse código, guardado no objeto <tt>dados_maternos_nacional</tt>, é uma tibble cujas primeiras linhas podem ser vistas a seguir:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndados_maternos_nacional\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 15 × 4\n     ano nascimentos_br obitos_br mortalidade_br\n   <dbl>          <dbl>     <dbl>          <dbl>\n 1  2005        3035096      1620           53.4\n 2  2006        2944928      1623           55.1\n 3  2007        2891328      1590           55.0\n 4  2008        2934828      1681           57.3\n 5  2009        2881581      1872           65.0\n 6  2010        2861868      1719           60.1\n 7  2011        2913160      1610           55.3\n 8  2012        2905789      1583           54.5\n 9  2013        2904027      1686           58.1\n10  2014        2979259      1739           58.4\n11  2015        3017668      1738           57.6\n12  2016        2857800      1670           58.4\n13  2017        2923535      1718           58.8\n14  2018        2944932      1658           56.3\n15  2019        2849146      1576           55.3\n```\n:::\n:::\n\n\nCom os dados preparados, podemos partir para a construção do gráfico de linhas, na qual utilizaremos a função <tt>ggplot</tt>, do pacote <tt>ggplot2</tt>. Atribuiremos ao argumento <tt>data</tt> a tibble <tt>dados_maternos_nacional</tt>, e ao argumento <tt>mapping</tt> os aesthetics do nosso gráfico, que nesse caso serão apenas o eixo x, que receberá a variável <tt>ano</tt>, e o eixo y, que receberá a variável <tt>mortalidade_br</tt>. O primeiro complemento do gráfico será a função <tt>geom_line</tt>, que criará a(s) linha(s) do gráfico de linhas. Os únicos argumentos que utilizaremos nessa função serão o <tt>color</tt>, para alterar a cor da linha a ser gerada, e o <tt>size</tt>, para alterar sua expessura. O próximo complemento, <tt>geom_point</tt>, é utilizado para fazer gráficos de dispersão, e criará pontos em nosso gráfico para facilitar sua visualização. Em <tt>scale_x_continuous</tt>, definimos que as marcações do eixo x devem ocorrer de ano em ano. O título do gráfico, sua legenda e os nomes dos eixos são atribuídos pelo complemento <tt>labs</tt>, e utilizaremos <tt>theme</tt> apenas para alterar o tamanho dos textos do gráfico.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# Construindo o gráfico de linhas\nggplot(data = dados_maternos_nacional, mapping = aes(x = ano, y = mortalidade_br)) +\n  geom_line(color = \"#32A0FF\", size = 1) +\n  geom_point() +\n  scale_x_continuous(breaks = unique(dados_maternos_nacional$ano)) +\n  labs(title = \"Evolução da razão de mortalidade materna brasileira ao longo do tempo\",\n       caption = \"Fontes: SIM e SINASC\",\n       x = \"Ano\",\n       y = \"Razão de mortalidade materna\") +\n  theme(text = element_text(size = 16)) \n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-9-1.png){fig-align='center' width=1152}\n:::\n:::\n\n\nUma análise rápida do gráfico nos permite fazer um questionamento óbvio: o que aconteceu de 2008 para 2009 para que a razão de mortalidade materna nacional tivesse um aumento tão significativo em seu valor? A resposta, um assunto que está atualmente em alta: uma pandemia, que nesse caso era do vírus da Influenza A (H1N1). Observe o próximo exemplo para ter uma melhor noção dos efeitos dessa pandemia na razão de mortalidade materna em uma escala estadual.\n\n# Utilizando gráficos de barras para visualizar os efeitos da pandemia de H1N1 nos estados brasileiros\n\n[Iniciada no México em abril de 2009](https://www.bbc.com/portuguese/brasil-52042879), a pandemia do vírus da Influnza A, assim declarada em junho do mesmo ano pela OMS [(G1, 2009)](https://g1.globo.com/Sites/Especiais/Noticias/0,,MUL1191163-16726,00-ORGANIZACAO+MUNDIAL+DE+SAUDE+DECLARA+PANDEMIA+DA+NOVA+GRIPE.html), espalhou-se rapidamente pelo mundo. No Brasil, até dezembro de 2010, foram confirmados 59.867 casos e 2.173 mortes (da população geral) pelo vírus, de acordo com [dados do Ministério da Saúde](https://piaui.folha.uol.com.br/lupa/2020/03/27/verificamos-coronavirus-h1n1/). Gestantes, entretanto, estão mais suscetíveis às complicações e aos óbitos por doenças infecciosas, como é o caso da Influenza. Dessa forma, mesmo que esse grupo de mulheres tenha sido precocemente identificado como um grupo de risco durante a pandemia de H1N1, houve, no ano de 2009, um aumento no número de óbitos maternos (e consequentemente, na razão de mortalidade materna, como observado no gráfico anterior), visto que a campanha nacional de vacinação contra o vírus foi iniciada apenas em março de 2010.\n\nPara este exemplo, digamos que seja de nosso interesse realizar a seguinte análise: observar a evolução das razões de mortalidade materna por estado nos anos de 2008 (pré-pandemia), 2009 (durante a pandemia), 2010 (início da vacinação) e 2011 (pós-pandemia), utilizando para isso uma série de gráficos de barras. O primeiro passo, como no exemplo anterior, é a preparação dos dados. Para realizá-la, utilizaremos a função <tt>filter</tt>, do pacote <tt>dplyr</tt> que filtrará no banco de dados designado apenas as linhas em que todas as condições dadas forem satisfeitas. Dessa forma, os argumentos dessa função devem ser expressões que retornem um valor lógico. No nosso caso, queremos filtrar as linhas da tibble <tt>dados_maternos</tt> nas quais a variável <tt>ano</tt> está entre 2008 e 2011, considerando os extremos. A tibble resultante dessa operação será salva em <tt>dados_maternos_h1n1</tt>.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# Filtrando apenas os dados de 2008 a 2010\ndados_maternos_h1n1 <- dados_maternos |>\n  filter(ano >= 2008 & ano <= 2011) \n```\n:::\n\n\nA construção do gráfico, apesar de também ser feita através do pacote <tt>ggplot2</tt>, é significativamente diferente àquela feita no exemplo anterior. Dentro da função <tt>ggplot</tt>, o argumento <tt>data</tt> receberá a tibble criada acima, enquanto os aesthetics do gráfico serão três: no eixo x, queremos a variável <tt>uf</tt>; no eixo y, a variável <tt>mortalidade</tt>; por fim, o argumento <tt>fill</tt> determinará de que forma cada barra do gráfico será preenchida, e queremos que seja de acordo com a variável <tt>ano</tt>. Note que estamos transformando essa última variável numa variável categórica por meio da função <tt>as.factor</tt>.\n\nO primeiro complemento do gráfico é a função <tt>geom_col</tt>, a qual construirá nossos gráficos de barras e que possui dois argumentos: <tt>position = \"dodge\"</tt>, que faz com que as barras construídas para cada estado sejam postas lado a lado, facilitando sua visualização, e <tt>width = 0.5</tt>, que muda a expessura das barras. O próximo complemento, <tt>facet_wrap</tt>, será responsável pela mágica desse exemplo. Imagine como seria péssima a visualização de 27 gráficos de barras, com quatro barras cada, numa única linha. Lembre-se, entretanto, que a nossa tibble <tt>dados_maternos_h1n1</tt> possui uma coluna que especifica a região de cada estado. Assim, utilizaremos a função <tt>facet_wrap</tt> para que nosso gráfico contenha cinco fileiras de gráficos de barras, separando os gráficos de cada estado de acordo com a região à qual pertencem. Os argumentos que iremos utilizar são três: <tt>facets = vars(regiao)</tt> indicará que o gráfico deve ser separado pela variável <tt>regiao</tt>; <tt>scales = \"free_x\"</tt> torna as escalas do eixo x livres, fazendo com que os únicos valores exibidos no eixo x de cada gráfico sejam os estados que pertencem à dada região; o último, <tt>ncol = 1</tt>, define que o gráfico deve ter apenas uma coluna. Com o complemento <tt>scale_fill_manual</tt>, definiremos cores específicas para cada um dos quatro anos presentes no gráfico. Por fim, mudamos a posição da legenda do gráfico para o topo, utilizando o argumento <tt>legend.position = \"top\"</tt>, do complemento <tt>theme()</tt>. O gráfico resultante de todo esse processo pode ser visto abaixo.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# Construindo os gráficos de barras\nggplot(data = dados_maternos_h1n1, \n       mapping = aes(x = uf, y = mortalidade, fill = as.factor(ano))) +\n  geom_col(position = \"dodge\", width = 0.5) +\n  facet_wrap(facets = vars(regiao), scales = \"free_x\", ncol = 1) + \n  labs(title = \"Efeitos da pandemia de H1N1 na razão de mortalidade materna dos estados brasileiros\", \n       caption = \"Fontes: SIM e SINASC\",\n       x = NULL, \n       y = \"Razão de mortalidade materna\",\n       fill = \"Ano\") +\n  scale_fill_manual(values = c(\"#377EB8\", \"#B2182B\", \"#4DAF4A\", \"#FD8D3C\")) +\n  theme(legend.position = \"top\", text = element_text(size = 16)) \n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-11-1.png){fig-align='center' width=1152}\n:::\n:::\n\n\nAnalisando os gráficos acima, podemos realizar algumas observações. Em primeiro lugar, 15 dos 27 estados brasileiros apresentaram um aumento na razão de mortalidade materna em 2009, incluindo todos os quatro estados da região Sudeste. Já em 2010, ano em que foi iniciada a campanha de vacinação nacional, podemos observar um efeito contrário: 18 dos 27 estados tiveram o valor de sua razão diminuído, tendência que também pode ser observada em 2011, primeiro ano pós-pandemia, no qual 19 unidades federativas apresentaram uma redução em sua razão de mortalidade materna. Apesar de não podermos afirmar com plena certeza, sem análises mais profundas, que a pandemia da Influenza A, bem como seu declínio e o início da vacinação, são os responsáveis pelos efeitos citados observando apenas os gráficos feitos, podemos, no mínimo, considerá-los como fortes candidatos. Mas passemos agora para o próximo exemplo. Vamos falar sobre as diferenças regionais do Brasil no que tange à razão de mortalidade materna.\n\n# Observando a heterogeneidade das regiões brasileiras por meio de um gráfico de linhas\n\nNão é segredo que o território brasileiro é marcado por intensas diferenças socioeconômicas nas mais diversas escalas geográficas. Quando pensamos nas regiões do país, sabemos que, historicamente, uma série de fatores como a concentração industrial, a ocupação tardia e aspectos naturias contribuíram para o desenvolvimento desigual das mesmas, o que pode ser constatado através da comparação entre vários tipos de indicadores das cinco regiões brasileiras. Tomando como exemplo o IDHM (Índice de Desenvolvimento Humano Municipal), temos, de acordo com [dados do PNUD](https://portaldeboaspraticas.iff.fiocruz.br/biblioteca/desenvolvimento-humano-nas-macrorregioesbrasileiras/) (Programa das Nações Unidas para o Desenvolvimento), que em 2016 as regiões Norte e Nordeste possuíam os piores índices do país, atingindo, respectivamente, 0,667 e 0,663, números consideravelmente mais baixos do que os das regiões Sudeste (0,766), Centro-Oeste (0,757) e Sul (0,754). No que diz respeito à razão de mortalidade materna, veremos neste exemplo que essa tendência se repete, utilizando, para isso, um gráfico de (várias) linhas que nos permitirá analisar como se dá a desigualdade desse indicador entre as cinco regiões do Brasil.\n\nO primeiro passo, como sempre, é preparar os dados. De forma semelhante ao exemplo anterior, vamos agrupar os dados utilizando a função <tt>group_by</tt> e os resumir com <tt>summarise</tt>. A diferença é que aqui estaremos agrupando a tibble <tt>dados_maternos</tt> por região e ano, ao invés de agrupá-los somente por ano.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# Agrupando os dados por região e ano e os resumindo\ndados_maternos_regional <- group_by(dados_maternos, regiao, ano) |>\n  summarise(nascimentos_reg = sum(nascimentos),\n            obitos_reg = sum(obitos),\n            mortalidade_reg = round((obitos_reg/nascimentos_reg) * 100000, 2))\n```\n:::\n\n\nQuanto ao gráfico, utilizaremos para o argumento <tt>data</tt>, da função <tt>ggplot</tt>, a tibble criada no passo anterior, enquanto os aesthetics de <tt>mapping</tt> serão três: no eixo x, deve ser representada a variável <tt>ano</tt>; no eixo y, a variável <tt>mortalidade_reg</tt>; quanto ao argumento <tt>color</tt>, queremos que as linhas sejam coloridas de acordo com a variável <tt>regiao</tt>. O complemento <tt>geom_line</tt> criará as linhas do gráfico, cuja expessura é alterada utilizando o argumento <tt>color</tt>. Em <tt>scale_x_continuous</tt>, definiremos com o argumento <tt>breaks</tt> que as marcações do eixo x devem ocorrer em intervalos de um ano. Com o complemento <tt>geom_text</tt>, escreveremos ao final das linhas a respectiva região que cada linha representa. Para isso, no argumento <tt>data</tt>, filtraremos nossa tibble para manter apenas as linhas em que o ano é o último, ou seja, 2019. Os aesthetics de <tt>mapping</tt> serão os seguintes: em <tt>label</tt>, onde devemos dizer o que será escrito no gráfico, escolhemos a variável <tt>regiao</tt>, o que fará com que sejam escritos os nomes das cinco regiões; em <tt>x</tt>, definimos as coordenadas do eixo x em que serão escritos os textos determinados em <tt>label</tt>, os quais deverão estar levemente à direita do último ano de registro; em <tt>y</tt>, designamos as coordenadas do eixo y nas quais os textos serão escritos, e queremos que eles estejam na altura da razão de mortalidade materna do último ano; por fim, definimos em <tt>color</tt> que os textos devem ser coloridos de acordo com a variável <tt>regiao</tt>. O argumento <tt>clip = \"off\"</tt>, do complemento <tt>coord_cartesian</tt>, garante que os nomes das regiões não sejam cortados caso ultrapassem os limites do gráfico. Veja a seguir o gráfico resultante desse código.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# Construindo o gráfico de linhas\nggplot(data = dados_maternos_regional, \n       mapping = aes(x = ano, \n                     y = mortalidade_reg,\n                     color = regiao)) +\n  geom_line(size = 1) +\n  scale_x_continuous(breaks = unique(dados_maternos_regional$ano)) +\n  labs(title = \"Evolução da razão de mortalidade materna das cinco regiões brasileiras ao longo do tempo\",\n       caption = \"Fontes: SIM e SINASC\",\n       x = \"Ano\",\n       y = \"Razão de mortalidade materna\") +\n  geom_text(data = dados_maternos_regional |> filter(ano == last(ano)), \n            mapping = aes(label = regiao,\n                          x = ano + 0.75,\n                          y = mortalidade_reg, \n                          color = regiao),\n            size = 4.5) +\n  coord_cartesian(clip = \"off\") +\n  theme(legend.position = \"none\", text = element_text(size = 16))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-13-1.png){fig-align='center' width=1152}\n:::\n:::\n\n\nObservando o gráfico acima, podemos destacar alguns pontos de interesse. Em primeiro lugar, é possível observar que em todos os anos analisados as regiões Norte ou Nordeste apresentaram as maiores razões de mortalidade materna do país, enquanto as regiões Sul ou Sudeste só não estiveram na outra ponta desse espectro no ano de 2007, quando a região Centro-Oeste apresentou o menor índice do Brasil. Além disso, outro ponto notório é o aumento expressivo nos valores desse indicador de 2008 para 2009 em quatro das cinco regiões brasileiras, assunto que já exploramos anteriormente. Por fim, podemos salientar a diminuição contínua na razão de mortalidade materna nordestina a partir de 2013, atingindo em 2019 níveis comparáveis aos da região Centro-Oeste. Vamos agora para o último exemplo deste post, no qual faremos uma breve análise do cenário atual da razão de mortalidade materna no país.\n\n# Analisando o cenário atual da razão de mortalidade materna brasileira por meio de um mapa coroplético\n\nNo ano de 2000, foram estabelecidos através da Declaração do Milênio da ONU os Objetivos de Desenvolvimento do Milênio (ODM), adotados por 191 Estados-membros (incluindo o Brasil), nos quais foram estipulados uma série de compromissos que visavam uma grande melhoria na qualidade de vida da população mundial até 2015. Entre esses objetivos, ficou estabelecido que o Brasil deveria reduzir, até o ano de 2015, a razão de mortalidade materna para 35 óbitos maternos a cada 100.000 nascidos vivos. O país, entretanto, assim como boa parte dos outros países signatários, falhou miseravelmente. Dessa forma, em 2015, foi proposta pela ONU uma nova agenda de desenvolvimento sustentável para os próximos 15 anos, a Agenda 2030, formada por 17 Objetivos de Desenvolvimento Sustentável (ODS). Nesses novos objetivos, o Brasil se comprometeu a reduzir, até 2030, a razão de mortalidade materna para 30 óbitos maternos a cada 100.000 nascidos vivos. Assim, nesse exemplo, utilizaremos um mapa coroplético para analisar o cenário atual desse indicador no país, discutindo sobre os impasses que dificultam a plena realização dos compromissos firmados perante à ONU em tempo hábil.\n\nPara começo de conversa, um mapa coroplético é um tipo de mapa que utiliza cores de diferentes intensidades para exibir como o valor de uma certa variável varia numa determinada localização geográfica, utilizando colorações mais claras quando o valor dessa variável é menor e colorações mais escuras quando é maior. No nosso caso, estamos interessados em fazer um mapa cloroplético que represente a variação da razão de mortalidade materna de 2019 entre cada estado brasileiro.\n\nO primeiro passo para a construção desse mapa é obter um arquivo do tipo <tt>shapefile</tt> que contenha o mapa do Brasil com as delimitações dos estados. Por sorte, o IBGE disponibiliza [em seu site](https://www.ibge.gov.br/geociencias/organizacao-do-territorio/malhas-territoriais/15774-malhas.html?=&t=downloads) tais arquivos para que qualquer pessoa possa realizar os seus downloads. Para facilitar o processo, faremos o download e a descompactação do arquivo de interesse diretamente com o R.\n\nPrimeiramente, guardaremos no vetor <tt>link_ufs</tt> o endereço do site do IBGE no qual o arquivo desejado está localizado. Com a função <tt>tempdir</tt>, do pacote básico <tt>base</tt>, criaremos um diretório temporário no qual o arquivo será salvo, realizando seu download através da função <tt>download.file</tt>, do pacote básico <tt>utils</tt>. Utilizaremos dois argumentos dessa função: o <tt>url</tt>, que recebe o link de download para o arquivo, e o <tt>destfile</tt>, que recebe o diretório no qual o arquivo será salvo, bem como seu nome. A descompactação do arquivo será realizada com a função <tt>unzip</tt>, também do pacote básico <tt>utils</tt>, na qual utilizamos o argumento <tt>zipfile</tt> para apontar o diretório no qual o arquivo está localizado, juntamente com seu nome, e o argumento <tt>exdir</tt> para dizer em qual diretório queremos que o arquivo descompactado se localize. Feito isso, aplicaremos a função <tt>st_read</tt>, do pacote <tt>sf</tt>, carregado no início do post, para ler o arquivo <tt>BR_UF_2020.shp</tt>, salvo no diretório temporário que criamos, e que contém os dados necessários para a construção do mapa brasileiro com as delimitações de cada estado. O resultado desse processo é um <tt>data.frame</tt> que será guardado no objeto <tt>br_ufs</tt>.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# Fazendo o download e a descompactação dos arquivos necessários para o mapa coroplético\nlink_ufs <- \"ftp://geoftp.ibge.gov.br/organizacao_do_territorio/malhas_territoriais/malhas_municipais/municipio_2020/Brasil/BR/BR_UF_2020.zip\"\ntmp_dir <- tempdir()\ndownload.file(url = link_ufs, destfile = file.path(tmp_dir, 'BR_UF_2020.zip'))\nunzip(zipfile = file.path(tmp_dir, 'BR_UF_2020.zip'),\n      exdir = tmp_dir)\n\nbr_ufs <- st_read(dsn = file.path(tmp_dir, \"BR_UF_2020.shp\"),\n                  stringsAsFactors = FALSE,\n                  quiet = TRUE)\n```\n:::\n\n\nVeja abaixo as primeiras linhas de <tt>br_ufs</tt>. Note que as linhas estão ordenadas de acordo com o código dos estados, assim como a tibble <tt>dados_maternos</tt> com a qual estamos trabalhando.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nhead(br_ufs)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nSimple feature collection with 6 features and 4 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: -73.99045 ymin: -13.6937 xmax: -46.06142 ymax: 5.271841\nGeodetic CRS:  SIRGAS 2000\n  CD_UF    NM_UF SIGLA_UF NM_REGIAO                       geometry\n1    11 Rondônia       RO     Norte MULTIPOLYGON (((-65.3815 -1...\n2    12     Acre       AC     Norte MULTIPOLYGON (((-71.07772 -...\n3    13 Amazonas       AM     Norte MULTIPOLYGON (((-69.83766 -...\n4    14  Roraima       RR     Norte MULTIPOLYGON (((-63.96008 2...\n5    15     Pará       PA     Norte MULTIPOLYGON (((-51.43248 -...\n6    16    Amapá       AP     Norte MULTIPOLYGON (((-50.45011 2...\n```\n:::\n:::\n\n\nO próximo passo é adicionar ao <tt>data.frame</tt> criado acima a variável quantitativa com a qual queremos preencher nosso mapa, que nesse caso é a razão de mortalidade materna estadual do ano de 2019. Como a tibble <tt>dados_maternos</tt>, criada no início do post, também está ordenada de acordo com o código dos estados, precisamos apenas guardar no vetor <tt>mortalidade_2019</tt> o valor das razões de mortalidade materna estaduais do ano de 2019, utilizando para isso a função <tt>which</tt>, do pacote básico <tt>base</tt>. Após esse passo, utilizaremos a função <tt>mutate</tt> para adicionar ao <tt>data.frame br_ufs</tt> uma nova coluna, nomeada por <tt>mort_ufs</tt>, que será preenchida pelo vetor <tt>mortalidade_2019</tt>. Observe, entretanto, que estamos aplicando nesse vetor a função <tt>cut</tt>, que irá dividi-lo nos intervalos especificados. Assim, os valores que realmente serão atribuídos à coluna <tt>mort_ufs</tt> serão os intervalos nos quais as razões de mortalidade se encontram. É importante frizar que a concatenação entre o vetor <tt>mortalidade_2019</tt> e o <tt>data.frame br_ufs</tt> só poderá ser feita de forma direta porque ambos estão ordenados de acordo com o código das unidades federativas brasileiras.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# Obtendo as razões de 2019, separando-as em intervalos e adicionando ao data.frame br_ufs\nmortalidade_2019 <- dados_maternos$mortalidade[which(dados_maternos$ano == 2019)]\nbr_ufs <- br_ufs |> mutate(\"mort_ufs\" = cut(mortalidade_2019, c(0, 30, 50, 70, 90)))\n```\n:::\n\n\nO <tt>data.frame</tt> resultante do processo é o seguinte:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nhead(br_ufs)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nSimple feature collection with 6 features and 5 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: -73.99045 ymin: -13.6937 xmax: -46.06142 ymax: 5.271841\nGeodetic CRS:  SIRGAS 2000\n  CD_UF    NM_UF SIGLA_UF NM_REGIAO                       geometry mort_ufs\n1    11 Rondônia       RO     Norte MULTIPOLYGON (((-65.3815 -1...  (30,50]\n2    12     Acre       AC     Norte MULTIPOLYGON (((-71.07772 -...  (30,50]\n3    13 Amazonas       AM     Norte MULTIPOLYGON (((-69.83766 -...  (70,90]\n4    14  Roraima       RR     Norte MULTIPOLYGON (((-63.96008 2...  (70,90]\n5    15     Pará       PA     Norte MULTIPOLYGON (((-51.43248 -...  (70,90]\n6    16    Amapá       AP     Norte MULTIPOLYGON (((-50.45011 2...  (30,50]\n```\n:::\n:::\n\n\nCom os dados preparados, podemos, finalmente, partir para a construção do nosso mapa cloroplético, utilizando para isso a função <tt>geom_sf</tt>, do pacote <tt>ggplot2</tt>. O aesthetic <tt>fill = mort_ufs</tt>, da função <tt>ggplot</tt>, preencherá os estados de acordo com o intervalo no qual suas razões de mortalidade materna se encontram. Os demais complementos do gráfico já foram explicados ao longo dos exemplos anteriores.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# Construindo o mapa coroplético\nggplot(data = br_ufs, mapping = aes(fill = mort_ufs)) +\n  geom_sf() +\n  labs(title = \"Mapa coroplético da razão de mortalidade materna por estado em 2019\",\n       caption = \"Fontes: IBGE, SIM e SINASC\",\n       fill = paste(c(\"Óbitos maternos a cada\", \"100.000 nascidos vivos\"), collapse = \"\\n\")) +\n  scale_fill_brewer(palette = \"Blues\") +\n  theme_minimal(base_size = 16)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-18-1.png){fig-align='center' width=1152}\n:::\n:::\n\n\nSe o Brasil planeja honrar o compromisso de reduzir a razão de mortalidade materna para 30 óbitos maternos a cada 100.000 nascidos vivos, claramente há um caminho árduo a ser percorrido. Observando o gráfico acima, podemos perceber que, de todos as 27 unidades federativas brasileiras, apenas o Distrito Federal estava abaixo do limite desejado em 2019, com 21,22 óbitos maternos a cada 100.000 nascidos vivos, enquanto outros 10 estados tinham sua razão de mortalidade materna dentro do intervalo de 30 a 50 óbitos maternos. Sete estados possuíam essa razão entre 70 e 90, dos quais seis se localizam nas regiões Norte ou Nordeste, o que concorda com a discussão anterior sobre as desigualdades regionais existentes no território brasileiro. Vale destacar ainda que estamos considerando os dados de 2019 como os mais atuais, visto que os dados de 2020 e 2021 são preliminares. Esses dois anos, entretanto, foram os anos em que, respectivamente, a pandemia da Covid-19 se iniciou e atingiu seu ápice. Quando consideramos que a pandemia da Influenza A foi responsável por um aumento significativo da razão de mortalidade materna nacional em 2009, mesmo que tenha causado \"apenas\" 2.101 óbitos totais no país, é assustador imaginar o efeito da atual pandemia nesse indicador, dado que já foram registrados mais de 627 mil óbitos pelo novo Coronavírus desde março de 2020, de acordo com o Ministério da Saúde.\n\nCaso seja de seu interesse realizar uma leitura mais profunda sobre os dados do gráfico, terminaremos este exemplo construindo uma tabela que contém as razões de mortalidade materna estaduais em sua forma bruta, sem a divisão por intervalos. Para isso, filtraremos, primeiramente, a tibble <tt>dados_maternos</tt> para obter somente as linhas cujo ano é 2019, utilizando nesse processo a função <tt>filter</tt>. Na tibble resultante, aplicaremos a função <tt>select</tt> para selecionar todas as variáveis que queremos que estejam na tabela, e que nesse caso serão a sigla da unidade federativa, a região à qual pertence, o número de nascidos vivos e de óbitos maternos em 2019, e a razão de mortalidade materna de cada estado nesse mesmo período. Com a função <tt>arrange</tt>, ordenaremos os dados de forma crescente em relação à variável <tt>mortalidade</tt>. Por fim, com <tt>rename</tt>, renomearemos as colunas com os nomes que devem constar na tabela. A tibble resultante desse passo será guardada no objeto <tt>dados_2019</tt>, e todas as funções utilizadas nessa sequência pertencem ao pacote <tt>dplyr</tt>.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# Preparando os dados para a construção da tabela\ndados_2019 <- filter(dados_maternos, ano == 2019) |>\n  select(uf, regiao, nascimentos, obitos, mortalidade) |>\n  arrange(mortalidade) |>\n  rename(\"UF\" = uf, \n         \"Região\" = regiao, \n         \"Nº de nascimentos\" = nascimentos,\n         \"Nº de óbitos maternos\" = obitos, \n         \"Razão de mortalidade materna\" = mortalidade)\n```\n:::\n\n\nPara a construção da tabela, será utilizada a função <tt>datatable</tt>, do pacote <tt>DT</tt>, carregado no início do post. O primeiro argumento da função, <tt>data</tt>, recebe a tibble <tt>dados_2019</tt>, criada no passo anterior. Em <tt>caption</tt>, diremos qual deve ser a legenda da tabela. O argumento <tt>options</tt> recebe uma lista de customizações que a tabela deve conter: desabilitamos a caixa de pesquisa utilizando <tt>searching = FALSE</tt>; com <tt>paging = FALSE</tt>, impedimos que a tabela seja separada em páginas; por fim, através de <tt>columnDefs = list(list(className = \"dt-center\", targets = \"\\_all\")))</tt>, determinamos que o alinhamento de todas as colunas deve ser centralizado. O resultado final de todo o processo pode ser visto a seguir.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# Construindo a tabela\ndatatable(data = dados_2019, \n          caption = \"Tabela: Razão de mortalidade materna das unidades federativas brasileiras em 2019\",\n          rownames = FALSE,\n          options = list(searching = FALSE,\n                         paging = FALSE,\n                         columnDefs = list(list(className = \"dt-center\", targets = \"_all\")))\n          )\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"datatables html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-9aace244309dab804ee5\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-9aace244309dab804ee5\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"caption\":\"<caption>Tabela: Razão de mortalidade materna das unidades federativas brasileiras em 2019<\\/caption>\",\"data\":[[\"DF\",\"SC\",\"AP\",\"RS\",\"SE\",\"PR\",\"MG\",\"PE\",\"RO\",\"SP\",\"AC\",\"MS\",\"ES\",\"BA\",\"CE\",\"AL\",\"TO\",\"PB\",\"MT\",\"GO\",\"RN\",\"RJ\",\"MA\",\"RR\",\"AM\",\"PI\",\"PA\"],[\"Centro-Oeste\",\"Sul\",\"Norte\",\"Sul\",\"Nordeste\",\"Sul\",\"Sudeste\",\"Nordeste\",\"Norte\",\"Sudeste\",\"Norte\",\"Centro-Oeste\",\"Sudeste\",\"Nordeste\",\"Nordeste\",\"Nordeste\",\"Norte\",\"Nordeste\",\"Centro-Oeste\",\"Centro-Oeste\",\"Nordeste\",\"Sudeste\",\"Nordeste\",\"Norte\",\"Norte\",\"Nordeste\",\"Norte\"],[42422,98032,15356,134596,32697,153469,256892,133359,27028,583191,16280,43695,54925,197249,129185,49803,24449,57701,58852,96112,44031,207989,113317,14620,77622,47933,138341],[9,30,5,49,12,68,115,64,13,283,8,22,29,105,75,29,15,36,38,67,31,155,85,11,60,41,121],[21.22,30.6,32.56,36.41,36.7,44.31,44.77,47.99,48.1,48.53,49.14,50.35,52.8,53.23,58.06,58.23,61.35,62.39,64.57,69.71,70.4,74.52,75.01,75.24,77.3,85.54,87.47]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th>UF<\\/th>\\n      <th>Região<\\/th>\\n      <th>Nº de nascimentos<\\/th>\\n      <th>Nº de óbitos maternos<\\/th>\\n      <th>Razão de mortalidade materna<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"searching\":false,\"paging\":false,\"columnDefs\":[{\"className\":\"dt-center\",\"targets\":\"_all\"}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\nE com isso, aqui chegamos ao fim desse post. Esperamos que, por meio dessa leitura, os conceitos relativos à razão de mortalidade materna tenham ficado claros, e que os exemplos apresentados ao longo do texto tenham sido informativos o suficiente ao ponto de ser possível não só entender melhor sobre esse indicador, mas também descobrir novas funções e tipos diferentes de análises, principalmente visuais, que podem ser feitas através do R.\n\n# Referências\n\nhttps://bvsms.saude.gov.br/bvs/publicacoes/qualificacao_saude_sup/pdf/Atenc_saude3fase.pdf\n\nhttp://svs.aids.gov.br/dantps/cgiae/sinasc/\n\nhttp://svs.aids.gov.br/dantps/cgiae/sim/\n\nhttps://g1.globo.com/Sites/Especiais/Noticias/0,,MUL1191163-16726,00-ORGANIZACAO+MUNDIAL+DE+SAUDE+DECLARA+PANDEMIA+DA+NOVA+GRIPE.html\n\nhttps://piaui.folha.uol.com.br/lupa/2020/03/27/verificamos-coronavirus-h1n1/\n\nhttps://portaldeboaspraticas.iff.fiocruz.br/biblioteca/desenvolvimento-humano-nas-macrorregioesbrasileiras/\n\nhttps://www.elsevier.es/es-revista-reproducao-climaterio-385-articulo-mortalidade-materna-no-brasil-insucesso-S1413208714000089\n\nhttps://paulofelipe.github.io/bag_of_posts/posts/2018-10-21-mapa-coropltico-com-ggplot2/\n\nhttps://covid.saude.gov.br/\n\nhttps://www.ibge.gov.br/geociencias/organizacao-do-territorio/malhas-territoriais/15774-malhas.html?=&t=downloads\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/htmlwidgets-1.6.2/htmlwidgets.js\"></script>\r\n<link href=\"../../site_libs/datatables-css-0.0.0/datatables-crosstalk.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/datatables-binding-0.28/datatables.js\"></script>\r\n<script src=\"../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js\"></script>\r\n<link href=\"../../site_libs/dt-core-1.13.4/css/jquery.dataTables.min.css\" rel=\"stylesheet\" />\r\n<link href=\"../../site_libs/dt-core-1.13.4/css/jquery.dataTables.extra.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/dt-core-1.13.4/js/jquery.dataTables.min.js\"></script>\r\n<link href=\"../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}